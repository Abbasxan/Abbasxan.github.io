<!DOCTYPE html>
<html lang="az">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>2048 | Neon Sultan</title>
  <link rel="stylesheet" href="../assets/css/style.css" />
  <style>
    .g2048-container { display:flex; flex-direction:column; align-items:center; margin-top:48px; }
    .g2048-board { display: grid; grid-template-columns: repeat(4, 70px); grid-template-rows: repeat(4, 70px); gap: 8px; margin-top:18px; }
    .g2048-cell { width: 70px; height: 70px; background: #222; color: #fff; font-size: 1.6em; display: flex; align-items: center; justify-content: center; border-radius: 8px; font-weight: bold; transition: background .2s, color .2s; }
    .g2048-score { color: #61dafb; font-size: 1.2em; margin-top: 14px; }
    .g2048-btn { margin-top:18px; padding:10px 24px; font-size:1em; border-radius:8px; border:none; background:#61dafb; color:#222; font-weight:bold; cursor:pointer; }
    .g2048-btn:hover { background:#21a1f3; color:#fff; }
  </style>
</head>
<body>
  <nav class="navbar modern-navbar">
    <div class="container">
      <div class="logo">Neon Sultan</div>
      <ul class="nav-links" id="navLinks">
        <li><a href="../index.html">Ana Səhifə</a></li>
        <li><a href="../about.html">Haqqımda</a></li>
        <li><a href="../projects.html">Proyektlərim</a></li>
        <li><a href="../license.html">Lisenziya</a></li>
        <li><a href="../contact.html">Əlaqə</a></li>
        <li><a href="../oyunlar.html" class="active">Oyunlar</a></li>
      </ul>
    </div>
  </nav>
  <main class="container g2048-container">
    <h1>2048</h1>
    <div class="g2048-score" id="g2048Score">Xal: 0</div>
    <div class="g2048-board" id="g2048Board"></div>
    <button class="g2048-btn" onclick="g2048Start()">Yenidən başla</button>
    <a href="../oyunlar.html" class="g2048-btn" style="background:#222; color:#fff; margin-top:12px;">← Oyunlara qayıt</a>
  </main>
  <footer class="footer">
    <p>© 2025 Sultan. Neon Group Azerbaijan | <a href="../license.html">Lisenziya</a></p>
  </footer>
  <script>
    let g, score, running;
    const boardElem = document.getElementById('g2048Board');
    function g2048Start() {
      g = Array.from({length:4},()=>Array(4).fill(0));
      score = 0; running = true;
      addTile(); addTile();
      update();
    }
    function addTile() {
      let empty = [];
      for(let i=0;i<4;i++) for(let j=0;j<4;j++) if(!g[i][j]) empty.push([i,j]);
      if(empty.length) {
        let [i,j]=empty[Math.floor(Math.random()*empty.length)];
        g[i][j]=Math.random()<0.9?2:4;
      }
    }
    function update() {
      boardElem.innerHTML = '';
      for(let i=0;i<4;i++) for(let j=0;j<4;j++){
        let d = document.createElement('div');
        d.className = "g2048-cell";
        d.textContent = g[i][j]?g[i][j]:'';
        d.style.background = g[i][j]?`hsl(${40+g[i][j]*2},60%,${80-3*Math.log2(g[i][j]||2)}%)`:"#222";
        d.style.color = g[i][j]>4 ? "#222" : "#fff";
        boardElem.appendChild(d);
      }
      document.getElementById('g2048Score').textContent="Xal: "+score;
    }
    function move(dir) {
      if(!running) return;
      let moved=false;
      for(let n=0;n<(dir%2?4:1);n++){
        let line=[];
        for(let i=0;i<4;i++) line.push(dir<2?g[n][i]:g[i][n]);
        if(dir%2) line=line.slice().reverse();
        let merged=Array(4).fill(false);
        for(let i=1;i<4;i++) if(line[i]){
          let j=i;
          while(j>0&&line[j-1]==0){line[j-1]=line[j];line[j]=0;j--;moved=true;}
          if(j>0&&line[j-1]==line[j]&&!merged[j-1]){line[j-1]*=2;score+=line[j-1];line[j]=0;merged[j-1]=true;moved=true;}
        }
        if(dir%2) line=line.slice().reverse();
        for(let i=0;i<4;i++) dir<2?g[n][i]=line[i]:g[i][n]=line[i];
      }
      if(moved){addTile();update();}
      if(!canMove()) {running=false; alert("Oyun bitdi! Xal: "+score);}
    }
    function canMove(){
      for(let i=0;i<4;i++)for(let j=0;j<4;j++){
        if(!g[i][j]) return true;
        if(i<3 && g[i][j]==g[i+1][j]) return true;
        if(j<3 && g[i][j]==g[i][j+1]) return true;
      }
      return false;
    }
    document.addEventListener("keydown",function(e){
      if(e.key=="ArrowLeft") move(0);
      if(e.key=="ArrowUp") move(1);
      if(e.key=="ArrowRight") move(2);
      if(e.key=="ArrowDown") move(3);
   });
    g2048Start();
  </script>
</body>
</html>
